export const langMap = [
  {
    extensions: [],
    language: "abap",
    block: "",
  },
  {
    extensions: [],
    language: "aes",
    block: "",
  },
  {
    extensions: [],
    language: "apex",
    block: "",
  },
  {
    extensions: [],
    language: "azcli",
    block: "",
  },
  {
    extensions: [],
    language: "bat",
    block: "",
  },
  {
    extensions: [],
    language: "bicep",
    block: "",
  },
  {
    extensions: [],
    language: "c",
    block: "",
  },
  {
    extensions: [],
    language: "cameligo",
    block: "",
  },
  {
    extensions: ["chart"],
    language: "chart",
    block: "chart",
  },
  {
    extensions: [],
    language: "clojure",
    block: "",
  },
  {
    extensions: [],
    language: "coffeescript",
    block: "",
  },
  {
    extensions: [],
    language: "cpp",
    block: "",
  },
  {
    extensions: [],
    language: "csharp",
    block: "",
  },
  {
    extensions: [],
    language: "csp",
    block: "",
  },
  {
    extensions: ["css", "scss", "less", "sass"],
    language: "css",
    block: "css",
  },
  {
    extensions: [],
    language: "dart",
    block: "",
  },
  {
    extensions: [],
    language: "dockerfile",
    block: "",
  },
  {
    extensions: [],
    language: "ecl",
    block: "",
  },
  {
    extensions: [],
    language: "elixir",
    block: "",
  },
  {
    extensions: [],
    language: "fsharp",
    block: "",
  },
  {
    extensions: [],
    language: "go",
    block: "",
  },
  {
    extensions: [],
    language: "graphql",
    block: "",
  },
  {
    extensions: [],
    language: "handlebars",
    block: "",
  },
  {
    extensions: [],
    language: "hcl",
    block: "",
  },
  {
    extensions: ["htm", "html"],
    language: "html",
    block: "",
  },
  {
    extensions: [],
    language: "ini",
    block: "",
  },
  {
    extensions: [],
    language: "java",
    block: "",
  },
  {
    extensions: ["js", "jsx", "es"],
    language: "javascript",
    block: "code",
  },
  {
    extensions: ["json", "prettierrc"],
    language: "json",
    block: "",
  },
  {
    extensions: [],
    language: "julia",
    block: "",
  },
  {
    extensions: [],
    language: "kotlin",
    block: "",
  },
  {
    extensions: [],
    language: "less",
    block: "",
  },
  {
    extensions: [],
    language: "lexon",
    block: "",
  },
  {
    extensions: [],
    language: "liquid",
    block: "",
  },
  {
    extensions: [],
    language: "lua",
    block: "",
  },
  {
    extensions: [],
    language: "m3",
    block: "",
  },
  {
    extensions: ["md", "mdx", "markdown"],
    language: "markdown",
    block: "markdown",
  },
  {
    extensions: [],
    language: "mips",
    block: "",
  },
  {
    extensions: [],
    language: "msdax",
    block: "",
  },
  {
    extensions: [],
    language: "mysql",
    block: "",
  },
  {
    extensions: [],
    language: "objective-c",
    block: "",
  },
  {
    extensions: [],
    language: "pascal",
    block: "",
  },
  {
    extensions: [],
    language: "pascaligo",
    block: "",
  },
  {
    extensions: [],
    language: "perl",
    block: "",
  },
  {
    extensions: [],
    language: "pgsql",
    block: "",
  },
  {
    extensions: ["php"],
    language: "php",
    block: "",
  },
  {
    extensions: [],
    language: "plaintext",
    block: "",
  },
  {
    extensions: [],
    language: "postiats",
    block: "",
  },
  {
    extensions: [],
    language: "powerquery",
    block: "",
  },
  {
    extensions: [],
    language: "powershell",
    block: "",
  },
  {
    extensions: [],
    language: "pug",
    block: "",
  },
  {
    extensions: [],
    language: "python",
    block: "",
  },
  {
    extensions: [],
    language: "qsharp",
    block: "",
  },
  {
    extensions: [],
    language: "r",
    block: "",
  },
  {
    extensions: [],
    language: "razor",
    block: "",
  },
  {
    extensions: [],
    language: "redis",
    block: "",
  },
  {
    extensions: [],
    language: "redshift",
    block: "",
  },
  {
    extensions: [],
    language: "restructuredtext",
    block: "",
  },
  {
    extensions: [],
    language: "ruby",
    block: "",
  },
  {
    extensions: [],
    language: "rust",
    block: "",
  },
  {
    extensions: [],
    language: "sb",
    block: "",
  },
  {
    extensions: [],
    language: "scala",
    block: "",
  },
  {
    extensions: [],
    language: "scheme",
    block: "",
  },
  {
    extensions: [],
    language: "scss",
    block: "",
  },
  {
    extensions: [],
    language: "shell",
    block: "",
  },
  {
    extensions: [],
    language: "sol",
    block: "",
  },
  {
    extensions: [],
    language: "sparql",
    block: "",
  },
  {
    extensions: [],
    language: "sql",
    block: "",
  },
  {
    extensions: [],
    language: "st",
    block: "",
  },
  {
    extensions: [],
    language: "swift",
    block: "",
  },
  {
    extensions: [],
    language: "systemverilog",
    block: "",
  },
  {
    extensions: [],
    language: "tcl",
    block: "",
  },
  {
    extensions: [],
    language: "twig",
    block: "",
  },
  {
    extensions: ["ts", "tsx"],
    language: "typescript",
    block: "",
  },
  {
    extensions: [],
    language: "vb",
    block: "",
  },
  {
    extensions: [],
    language: "verilog",
    block: "",
  },
  {
    extensions: [],
    language: "xml",
    block: "",
  },
  {
    extensions: ["yaml", "yml"],
    language: "yaml",
    block: "",
  },
  // additional file types, not languages per se
  // we should probably split this up later to organize better
  {
    extensions: ["figma"],
    language: "",
    block: "iframe",
  },
  {
    extensions: ["svg"],
    language: "",
    block: "iframe",
  },
  {
    extensions: ["notes"],
    language: "",
    block: "notes",
  },
  {
    extensions: ["excalidraw"],
    language: "",
    block: "excalidraw",
  },
  {
    extensions: ["csv"],
    language: "",
    block: "flat",
  },
  {
    extensions: ["glb", "gltf", "obj", "fbx"],
    language: "",
    block: "3d",
  },
  {
    extensions: ["poll"],
    language: "",
    block: "poll",
  },
];

export function getLanguageFromFilename(filename) {
  if (!filename) return "";
  const extension = filename.split(".").slice(-1)[0];

  const match = langMap.find((mapping) =>
    mapping.extensions.includes(extension)
  );

  if (match) {
    return match.language;
  } else {
    return "";
  }
}

export function getBlockFromFilename(filename) {
  if (!filename) return "";
  const extension = filename.split(".").slice(-1)[0];

  const match = langMap.find((mapping) =>
    mapping.extensions.includes(extension)
  );

  if (match && match !== "") {
    return match.block;
  } else {
    return null;
  }
}

export const findNestedItem = (path, files) => {
  const nextItemName = path.split("/")[0];
  const nextItem = files.find((item) => item.name === nextItemName);
  const nextPath = path.split("/").slice(1).join("/");
  return nextPath
    ? findNestedItem(nextPath, nextItem?.children || [])
    : nextItem;
};
